{"mode":"block","xmlText":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><block type=\"ai_event_forever\" id=\"476+L,b7`_XJF_cC5H%/\" x=\"-587\" y=\"-2638\"><statement name=\"ONSTART\"><block type=\"ai_mqtt_connect_default_servers\" id=\"ZL#*BXK3k$,W0)wsex][\"><field name=\"SERVER\">io.adafruit.com:443</field><value name=\"USERNAME\"><shadow type=\"text\" id=\"x[r,6*YH`}TW].r.`C(k\"><field name=\"TEXT\">grassni</field></shadow></value><value name=\"KEY\"><shadow type=\"text\" id=\"UrJEuYGgY@JG7yq9f$y.\"><field name=\"TEXT\">aio_kaAh90hEIkRZjtS9mj1n9ILbZu4U</field></shadow></value></block></statement><statement name=\"FOREVER\"><block type=\"ai_speech_rec_event\" id=\"*KHw~:iQ#iYM%z!I6H`D\"><field name=\"language\">en-US</field><statement name=\"event_handler\"><block type=\"ai_display_background\" id=\"O$On7_oo$Ls/rB8;f;@0\"><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"C[krzy|Whnyi:(rdV9_}\"><field name=\"COLOUR\">#ffffff</field></shadow></value><next><block type=\"ai_display_text\" id=\"w:2E@#YQ.gahW7k^7?Jx\"><value name=\"TEXT\"><shadow type=\"text\" id=\"HhV.cw:oD6bSk;cYWGwE\"><field name=\"TEXT\">Hello</field></shadow><block type=\"ai_speech_rec_result\" id=\"-sGKraGA1koJ%MTs-/RO\"></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"0~_Bon|I*lD]m,zGQ@ws\"><field name=\"NUM\">100</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"v$v.)|m_am~^~khhV^O$\"><field name=\"NUM\">250</field></shadow></value><next><block type=\"controls_if\" id=\".9u3j:Eu-Qu5?jp@rk0{\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_operation\" id=\"y`$?CWJ7xp#=PZp*87e4\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\"36~os?WHb:fzH|N_pkm/\"><value name=\"check_values\"><shadow type=\"text\" id=\"1)ZQ#tVlB@m;wOIQKTzk\"><field name=\"TEXT\">off</field></shadow></value></block></value><value name=\"B\"><block type=\"logic_operation\" id=\"EDN*8+G,6@+0dX9iG:UP\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\"NR;g@Z]gC]PTi073.h}y\"><value name=\"check_values\"><shadow type=\"text\" id=\"%qGsNJQifQ-[}n/vTey#\"><field name=\"TEXT\">led,lamp,light</field></shadow></value></block></value><value name=\"B\"><block type=\"ai_speech_rec_result_check\" id=\"-k1sbT.L/~C]yh5{+N6E\"><value name=\"check_values\"><shadow type=\"text\" id=\".@[Fv$qb_AZQw$C=N.]j\"><field name=\"TEXT\">one,first</field></shadow></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"ai_mqtt_publish\" id=\"0yD;/ma$?^Qx@/0p{BWr\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"QXYThC!?e$:W$Pa55ibl\"><field name=\"TEXT\">Turn off led 1</field></shadow></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"hDH(VM=;%B{uS~]6`iba\"><field name=\"TEXT\">voice</field></shadow></value><next><block type=\"ai_mqtt_publish\" id=\"HX6`G^RFUCHOVO_J]4A0\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"]KAJdf:d;!Cz|t0bOVe#\"><field name=\"TEXT\">#000000</field></shadow></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"wQ[3)9;3$4u()?HJt#+P\"><field name=\"TEXT\">led1</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\" id=\"MM`FZs4lcVyIM4Ta|#C$\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_operation\" id=\"uS4!mNW-%%Vff,n/=od9\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\"ITm:]sEj4)K4c5#|3-lQ\"><value name=\"check_values\"><shadow type=\"text\" id=\"TMm)*?n?W=u-{t4[$ZT3\"><field name=\"TEXT\">on</field></shadow></value></block></value><value name=\"B\"><block type=\"logic_operation\" id=\"M3sEK#gN|hk;YIx7O4%B\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\"ee6G1#ExN:rrO[*uftXu\"><value name=\"check_values\"><shadow type=\"text\" id=\"#;/kV[h]LYm]KWuITQ}V\"><field name=\"TEXT\">led,lamp,light</field></shadow></value></block></value><value name=\"B\"><block type=\"ai_speech_rec_result_check\" id=\"SMp;/1u,hss=c1@w{RoB\"><value name=\"check_values\"><shadow type=\"text\" id=\"K;i-kCr8$ur~{SVF73yi\"><field name=\"TEXT\">two,second</field></shadow></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"ai_mqtt_publish\" id=\"$N_/xI5bB:zrQ(wCH#ud\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"k.w8{1m}8tx6.Gu9BT`u\"><field name=\"TEXT\">Turn on led 2</field></shadow></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"HOSsI#ODS/:Jfl5[wpX=\"><field name=\"TEXT\">voice</field></shadow></value><next><block type=\"ai_mqtt_publish\" id=\"fp{Ffjt~DKl.{!U5-BZS\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"E0XN:Wn0qftwmLaG0CL$\"><field name=\"TEXT\">#ffffff</field></shadow></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"cH9K)c`^Q5rvj?;aFU#]\"><field name=\"TEXT\">led2</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\" id=\"cz5Dg]#OS9X|JdIW8/Xk\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_operation\" id=\"Wy^Ib*M{qgjFD%}2aPEe\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\"S`;t4OD$mi{}:n?L5%u:\"><value name=\"check_values\"><shadow type=\"text\" id=\"+M)Im;4l^hBi+9b[Oa2l\"><field name=\"TEXT\">on</field></shadow></value></block></value><value name=\"B\"><block type=\"logic_operation\" id=\"u;FE`urv2W8fWt5%yd!p\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\";G-Ls;({/F*B4@.U;G,v\"><value name=\"check_values\"><shadow type=\"text\" id=\"ARE+(p]$q,R(Nh(m06Uz\"><field name=\"TEXT\">led,lamp,light</field></shadow></value></block></value><value name=\"B\"><block type=\"ai_speech_rec_result_check\" id=\"~xt1DFhq^5(0mp+TDY0;\"><value name=\"check_values\"><shadow type=\"text\" id=\"T:U%:Thyc8zd#Lr?O!eJ\"><field name=\"TEXT\">three,third</field></shadow></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"ai_mqtt_publish\" id=\"rfyB9-E%TK^5_H1BUv7=\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"+%Upy+fMY[Mne17j#5m?\"><field name=\"TEXT\">Turn on led 3</field></shadow></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"9Ylw#O?9YNdI(Z~^!KPa\"><field name=\"TEXT\">voice</field></shadow></value><next><block type=\"ai_mqtt_publish\" id=\"_A(_f@@n0FCMeoqMv.DE\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"-k2The;Ar9-I?huVk2KY\"><field name=\"TEXT\">#ffffff</field></shadow></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"(UV;Ab89n8k%2Ti;:I)j\"><field name=\"TEXT\">led3</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\" id=\"nWZYm^W]H=(HP=ra{G%#\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_operation\" id=\"!W9a0vu7!cUyDyEc.).%\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\"^di/XwKY-RSiv=liI2hm\"><value name=\"check_values\"><shadow type=\"text\" id=\"sMm6qy1mmp|9p/@]8|}s\"><field name=\"TEXT\">on</field></shadow></value></block></value><value name=\"B\"><block type=\"logic_operation\" id=\"`^]mQP}JBaw%ry^2V`AR\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\"MJ43Auso`D{RQ*2Ze%RD\"><value name=\"check_values\"><shadow type=\"text\" id=\"dut,:yXte:`M=c2CHYki\"><field name=\"TEXT\">led,lamp,light</field></shadow></value></block></value><value name=\"B\"><block type=\"ai_speech_rec_result_check\" id=\"pQ*gw~s[{%pMGf09[c{}\"><value name=\"check_values\"><shadow type=\"text\" id=\"RX!;ie=Lbc7Qr#Z{7?6u\"><field name=\"TEXT\">four,fourth,final</field></shadow></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"ai_mqtt_publish\" id=\"8+G^|gYC,LcAKMdvmB3_\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"57=2E7(mIIcAU8xz(il7\"><field name=\"TEXT\">Turn on led 4</field></shadow></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"8aRqDebvP.h`+S80vS~$\"><field name=\"TEXT\">voice</field></shadow></value><next><block type=\"ai_mqtt_publish\" id=\"{df~AqJsj2scR@_17u[G\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"0EDfc}zFbv#JQ+KY:6*m\"><field name=\"TEXT\">#ffffff</field></shadow></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"v,UHC7EH%TV[|7nxy(b-\"><field name=\"TEXT\">led4</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\" id=\"-hgv%1wXtB2d$DA4(D{b\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_operation\" id=\"7zlRDkBvL[bb!D?tw%L]\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\"?t~^.QR6=V|$$%foo8vR\"><value name=\"check_values\"><shadow type=\"text\" id=\"=`AB}qq0J@}tl_qDi`#0\"><field name=\"TEXT\">on</field></shadow></value></block></value><value name=\"B\"><block type=\"logic_operation\" id=\"~14wO0+po4,Si_LmFFDz\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\")Ksf/~/($]|oqos:}82.\"><value name=\"check_values\"><shadow type=\"text\" id=\"HcDOglY])2T1Dt3k454J\"><field name=\"TEXT\">led,lamp,light</field></shadow></value></block></value><value name=\"B\"><block type=\"ai_speech_rec_result_check\" id=\"G/50zRCZLJP`9fogSma~\"><value name=\"check_values\"><shadow type=\"text\" id=\".Q1Nz649R,q:*i4ZztYM\"><field name=\"TEXT\">one,first</field></shadow></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"ai_mqtt_publish\" id=\"5AD)(-@_QyIlt}j3F!NY\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\";d(hA@Gxbvym3a)_0t,P\"><field name=\"TEXT\">Turn on led 1</field></shadow></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"33bZ.4g~IFgtXEVmu5UC\"><field name=\"TEXT\">voice</field></shadow></value><next><block type=\"ai_mqtt_publish\" id=\"oVk,5akbLs%(0iKYFuJC\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"!dQAm;QeQE[y(O=)}7wv\"><field name=\"TEXT\">#ffffff</field></shadow></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"S={!^H@SWS*Qm~f.(p_#\"><field name=\"TEXT\">led1</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\" id=\"(t.yinMzFPFlPS2zC={@\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_operation\" id=\"Ottrfvn9aTGIhm]q43D7\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\"+:a9qU3(Oo+k!o_881[Z\"><value name=\"check_values\"><shadow type=\"text\" id=\"6R+`5;dNmbz1B?6P~tz}\"><field name=\"TEXT\">off</field></shadow></value></block></value><value name=\"B\"><block type=\"logic_operation\" id=\",._HQA(nEevm}z,D5;@!\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\"QAXE#39kj5a^?p-umBwz\"><value name=\"check_values\"><shadow type=\"text\" id=\";kF`jAQoQd!=c2@Y3R[*\"><field name=\"TEXT\">led,lamp,light</field></shadow></value></block></value><value name=\"B\"><block type=\"ai_speech_rec_result_check\" id=\"uc*C|WvFA+0TA]XxzX_,\"><value name=\"check_values\"><shadow type=\"text\" id=\"Tuv=AV~}~6p=;:{u6M1N\"><field name=\"TEXT\">two,second</field></shadow></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"ai_mqtt_publish\" id=\"tPooNeKH{w?23C)ITNBh\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"@}Yp=cSkL|nRGT$fYU)c\"><field name=\"TEXT\">Turn off led 2</field></shadow></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"p6EaQJCc|:_MAI8mS6TF\"><field name=\"TEXT\">voice</field></shadow></value><next><block type=\"ai_mqtt_publish\" id=\"29[7qd/W@h]|f0$Jx@N]\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"3`wPlx]R3G1M(QRZ5+YX\"><field name=\"TEXT\">#000000</field></shadow></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"}R#d?K5,{}[kr3fQ#IVh\"><field name=\"TEXT\">led2</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\" id=\"S|(Giik$Z?[Isj`f/j7.\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_operation\" id=\"e%LAyv+qUHB$@4lKSVW?\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\"3Er?gb~#}BtpROM;faZM\"><value name=\"check_values\"><shadow type=\"text\" id=\"1UqqLtBY*A(#/{/9=)f3\"><field name=\"TEXT\">off</field></shadow></value></block></value><value name=\"B\"><block type=\"logic_operation\" id=\"Ax6QA2}M-J9!@*c~@bQ:\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\"cJJsb*Ll*VfsOU7$`0ZG\"><value name=\"check_values\"><shadow type=\"text\" id=\"-=%)%SDA#MF1F*0@YV4q\"><field name=\"TEXT\">led,lamp,light</field></shadow></value></block></value><value name=\"B\"><block type=\"ai_speech_rec_result_check\" id=\"}Pk|79QzHmxd7P-*Ne9-\"><value name=\"check_values\"><shadow type=\"text\" id=\"nRl5^A%Z;x.O*-pm)FJM\"><field name=\"TEXT\">three,third</field></shadow></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"ai_mqtt_publish\" id=\"7BV!2HYy%|iV@-7[iOg8\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"5XE7;8)lH0@?t9(gl~z/\"><field name=\"TEXT\">Turn off led 3</field></shadow></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"#)YR)b3_LT;]ics-)?;7\"><field name=\"TEXT\">voice</field></shadow></value><next><block type=\"ai_mqtt_publish\" id=\"BN,Evm*4S;*xO=Sp)4kP\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"dlD]WrFcz}(e+s$HZD~g\"><field name=\"TEXT\">#000000</field></shadow></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"Yj~#wS68mi[9B-23vU!J\"><field name=\"TEXT\">led3</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\" id=\"?b)3.a_KE4?w6W8B;f86\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_operation\" id=\"A6Wa^KyHIvi#t!BG%-K8\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\"sYP16cdz/m@`E*S:)!li\"><value name=\"check_values\"><shadow type=\"text\" id=\"}5UH92EypGWJAUTif~}e\"><field name=\"TEXT\">off</field></shadow></value></block></value><value name=\"B\"><block type=\"logic_operation\" id=\"IKMz+_hBRq@NL_lXJ5w`\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"ai_speech_rec_result_check\" id=\"%mC2`FUJwYNytrL30S-~\"><value name=\"check_values\"><shadow type=\"text\" id=\"*1AXT,nJVBdi5-)k2O3=\"><field name=\"TEXT\">led,lamp,light</field></shadow></value></block></value><value name=\"B\"><block type=\"ai_speech_rec_result_check\" id=\"vUn3cS.#L`lHze[^`Cj_\"><value name=\"check_values\"><shadow type=\"text\" id=\"eQ^$%9etmz11(Jk,zgsx\"><field name=\"TEXT\">four,fourth,final</field></shadow></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"ai_mqtt_publish\" id=\"=ur_p_k=hevH@Fh37E%Q\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"L!Gt{,GT5^Sf0YfZp@-4\"><field name=\"TEXT\">Turn off led 4</field></shadow></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"6iX$hk..3#3rDf~rLGJK\"><field name=\"TEXT\">voice</field></shadow></value><next><block type=\"ai_mqtt_publish\" id=\"nc)VYn5IP(o/Z[}8L?IE\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"{EA{U8=Jg5z9Pf+nC8+0\"><field name=\"TEXT\">#000000</field></shadow></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"Ki]VV9{4zfgJXXKY9qtY\"><field name=\"TEXT\">led4</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"ai_mqtt_publish\" id=\"q#2O8!pV,^Z91~@|/_K*\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"Ahj(UbWn%))!,T[cZ}5%\"><field name=\"TEXT\">Cannot dectect</field></shadow></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"[_/2}m283+@5I7YdZa5J\"><field name=\"TEXT\">voice</field></shadow></value></block></statement></block></statement></block></statement></block></statement></block></statement></block></statement></block></statement></block></statement></block></next></block></next></block></statement><next><block type=\"ai_speech_rec_event_mode\" id=\"`955S3y~+7]8j`wpd8cq\"><field name=\"mode\">true</field></block></next></block></statement></block></xml>","javascript":"function mqtt_check_connection() {\n  client.on(\"connect\", function () {\n    console.log(\"Connected\")\n  })\n}\n\nfunction mqtt_check_message() {\n  client.on(\"message\", (topic, message, packet) => {\n    console.log(\"Received Message: \" + message.toString() + \" on topic: \" + topic)\n  })\n}\n\nfunction mqtt_subscribe(topic) {\n  client.subscribe(options.username + /feeds/ + topic, { qos: 0 }, function (error, granted) {\n    if (error) {\n      console.log(error)\n    } else {\n      console.log(`${granted[0].topic} was subscribed`)\n    }\n  })\n}\n\nfunction mqtt_publish(topic, msg) {\n  client.publish(options.username + /feeds/ + topic, msg, { qos: 0, retain: false }, function (error) {\n    if (error) {\n      console.log(error)\n    } else {\n      console.log(\"Published\")\n    }\n  })\n}\n\nfunction p5speechRecGotResult() {\n  background('#ffffff');\n  text((p5SpeechRec.resultString.toLowerCase()) , 100, 250);\n  if (new RegExp('off'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('led,lamp,light'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('one,first'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase())) {\n    mqtt_publish('voice', 'Turn off led 1')\n    mqtt_publish('led1', '#000000')\n  } else {\n    if (new RegExp('on'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('led,lamp,light'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('two,second'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase())) {\n      mqtt_publish('voice', 'Turn on led 2')\n      mqtt_publish('led2', '#ffffff')\n    } else {\n      if (new RegExp('on'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('led,lamp,light'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('three,third'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase())) {\n        mqtt_publish('voice', 'Turn on led 3')\n        mqtt_publish('led3', '#ffffff')\n      } else {\n        if (new RegExp('on'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('led,lamp,light'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('four,fourth,final'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase())) {\n          mqtt_publish('voice', 'Turn on led 4')\n          mqtt_publish('led4', '#ffffff')\n        } else {\n          if (new RegExp('on'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('led,lamp,light'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('one,first'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase())) {\n            mqtt_publish('voice', 'Turn on led 1')\n            mqtt_publish('led1', '#ffffff')\n          } else {\n            if (new RegExp('off'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('led,lamp,light'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('two,second'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase())) {\n              mqtt_publish('voice', 'Turn off led 2')\n              mqtt_publish('led2', '#000000')\n            } else {\n              if (new RegExp('off'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('led,lamp,light'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('three,third'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase())) {\n                mqtt_publish('voice', 'Turn off led 3')\n                mqtt_publish('led3', '#000000')\n              } else {\n                if (new RegExp('off'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('led,lamp,light'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase()) && new RegExp('four,fourth,final'.split(\",\").map(function(item) {return item.trim();}).join(\"|\")).test(p5SpeechRec.resultString.toLowerCase())) {\n                  mqtt_publish('voice', 'Turn off led 4')\n                  mqtt_publish('led4', '#000000')\n                } else {\n                  mqtt_publish('voice', 'Cannot dectect')\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n}\n\nfunction p5speechRecOnEnd() {\n  p5SpeechRec.start();\n}\n\nfunction sleep(s) {\n  ms = s * 1000\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n\nconst clientId = 'mqttjs_' + Math.random().toString(16).substr(2, 8);\n\nconst host = 'wss://io.adafruit.com:443'\n\nconst options = {clean: true,connectTimeout: 4000,clientId: clientId,username: 'grassni',password: 'aio_kaAh90hEIkRZjtS9mj1n9ILbZu4U'}\n\nconst client = mqtt.connect(host, options);\n\nlet p5SpeechRec = new p5.SpeechRec(\"en-US\", p5speechRecGotResult);\np5SpeechRec.onEnd = p5speechRecOnEnd;\np5SpeechRec.continuous = true; // do continuous recognition\n\nfunction preload() {\n\n}\n\nfunction setup() {\n  createCanvas(window.parent.document.getElementById('js-runner-container').offsetWidth-50, window.parent.document.getElementById('js-runner-container').offsetHeight-50);\n\n  mqtt_check_connection()\n\n}\n\nfunction draw() {\n  p5SpeechRec.start(); // start listening\n\n}\n","name":"voice2","extensions":[],"device":"ai"}